{"aid": "40103762", "title": "You Can't Handle the Buddhabrot", "url": "https://lcamtuf.substack.com/p/you-cant-handle-the-buddhabrot", "domain": "lcamtuf.substack.com", "votes": 1, "user": "bumbledraven", "posted_at": "2024-04-21 07:12:11", "comments": 0, "source_title": "You can't handle the Buddhabrot!", "source_text": "You can't handle the Buddhabrot! - lcamtuf\u2019s thing\n\n# lcamtuf\u2019s thing\n\nShare this post\n\n#### You can't handle the Buddhabrot!\n\nlcamtuf.substack.com\n\n# You can't handle the Buddhabrot!\n\n### Exploring the little-known sibling of the world's most famous fractal.\n\nApr 11, 2024\n\n22\n\nShare this post\n\n#### You can't handle the Buddhabrot!\n\nlcamtuf.substack.com\n\n3\n\nShare\n\nIn today\u2019s episode, let\u2019s talk about fractals, floating point numbers, and why\nthat one guy on Wikipedia is wrong.\n\nFirst things first: if you\u2019re unfamiliar with the term, fractals are a\nloosely-defined class of geometric shapes with a complex, endlessly-repeating\nstructure that\u2019s visible no matter how much you zoom in. A rudimentary example\nis the Koch curve, which can be constructed by repeatedly dividing every\nstraight line into three equal parts, and then adding a fourth segment to form\na \u201cspike\u201d. Keep doing this forever and presto \u2014 a fractal:\n\nThe beginnings of a Koch curve. Infinitely more steps to go.\n\nIn addition to being constructed on purpose, fractal patterns keep showing up\nin the solutions to a number of useful functions, usually near where the\nfunction is exhibiting high rates of separation \u2014 that is, rapid divergence of\nresults in response to infinitesimal differences in input values. The study of\nsuch systems is of considerable scientific interest: they are deterministic\nyet hard to predict if you don\u2019t have a perfect knowledge of the system\u2019s\nstate. They are a boon to cryptographers and the bane of weather forecasts.\n\nAs for the fractals themselves, they come with some interesting theoretical\nunderpinnings too \u2014 but for the most part, they function as visual\ncuriosities. The most famous example is the Mandelbrot set, named after Benoit\nMandelbrot and first portrayed on this printout from 1978:\n\nAn early sighting of the Mandelbrot fractal.\n\nThe core construct of the Mandelbrot set is the following iterated formula:\n\nBoth variables \u2014 z and c \u2014 are complex numbers. The value of c corresponds to\npixel coordinates; for the purpose of the computation, they\u2019re usually scaled\nto -2 ... 1.5 in the horizontal direction and -1.5 ... 1.5 vertically. The\nvalue of z_0 is initialized to zero.\n\nComplex numbers are a bit icky, but we can get rid of them before moving\nforward. First, let\u2019s replace z_n and c with a sum of normal Cartesian\ncoordinates \u2014 z_n = (x_n, y_n) and c = (u, v) \u2014 that are separated by the\nmagic value of i = \u221a-1:\n\nThe right-hand side of the equation can be expanded by following the normal\nrules for the square of a sum; just keep in mind that squaring \u221a-1 yields a\nreal number (-1):\n\nThe final step is to separate the real and imaginary (i-coupled) parts into\ntwo real-number-only coordinates:\n\nNow that we have a less scary formula, we can compute the Mandelbrot set by\ncalculating about 1,000 steps of the (x_n, y_n) sequence for every screen\ncoordinate (u, v); and then marking the (u, v) pixel as a part of the fractal\nif the (x_n, y_n) coordinates never escaped some modest radius (r \u2265 2) around\nthe center of the coordinate system.\n\nTo add some flair, we can also color the pixels outside the perimeter based on\ntheir \u201cescape velocity\u201d \u2014 that is, how quickly they bailed out:\n\nMandelbrot set with escape velocity shading, by author.\n\nThe resulting Mandelbrot set is pretty but also fairly bland: all the fractal\nfeatures are clustered along the perimeter and there is a huge void in the\nmiddle. Luckily, there is another remarkable way to visualize this set \u2014 or\nrather, the fate of the pixels that don\u2019t get sucked into the black hole.\n\n###\n\nFollow it... if you can\n\nAs it turns out, it\u2019s not just the boundary of the Mandelbrot set that\u2019s mind-\nbogglingly complex: the same goes for the (x_n, y_n) escape trajectories\nassociated with the (u, v) pixels near the set\u2019s edge. The iterated\ncoordinates follow elaborate, long-winded paths through space; their ethereal\ntrails form a density plot reminiscent of the Mandelbrot fractal itself. At\nlow iteration counts, this similarity is quite pronounced:\n\nNascent Buddhabrot: 20 iterations, 32x32 oversampling. By author.\n\nThat said, when iterated over longer timescales, the new set develops a\ncharacter of its own:\n\nComposite 100k (R) + 100 (G, B) iterations, 32x32 oversample. By author.\n\nCompared to the famed Mandelbrot set, this visualization \u2014 known as the\nBuddhabrot \u2014 is quite obscure. It is also notoriously difficult to compute;\nfor example, two prominent renderings on Wikipedia are quite a bit off.\n\nThe main issue is the trajectories\u2019 extreme sensitivity to starting\nconditions, exacerbated by the need to iterate the system for longer than\nnecessary for most other plots. To illustrate the pitfalls, let\u2019s consider the\nseemingly trivial task of translating integer screen coordinates to normalized\nfloating-point (u, v) values, with the zero axis running through the middle of\nthe plot. The most intuitive solution is the following formula:\n\nAlas, that division is a trap: we all know that the results can be inexact,\nbut it\u2019s less obvious that this loss of precision might not be symmetrical in\nrespect to our newly-chosen zero point. Here\u2019s a real example of the\nunexpected bias for x_max = 3,000:\n\nThis small error, compounded across hundreds of thousands of iterations, is\nenough to break the plot\u2019s symmetry. I\u2019d wager this is the most likely\nexplanation of the issues with the following Wikipedia image:\n\nWikipedia\u2019s Buddhabrot (left) and a map of broken-symmetry pixels (right).\n\nAnother problem present in that Wikipedia rendering and many other online\nexamples are sharply-delineated curved lines, halos, and circles in the plot.\nThey\u2019re not an intrinsic feature of the set: instead, they\u2019re density\ndiscontinuities caused by the discrete stepover of (u, v) values, probably\nworsened by floating-point math. The patterns are pretty, but they\u2019re just a\ncomputational artifact that changes in response to variations in sample rate:\n\nArtifacts galore: 2x2 oversampling, 1 million iterations. By author.\n\nIndeed, with sufficient oversampling, these artifacts fade into the\nbackground:\n\nClean render: 32x32 oversampling, 1 million iterations. By author.\n\nIf you\u2019d like to experiment with this or similar fractals, I have a very\nconcise implementation here. I used this code to generate all the images in\nthis article, except for the Koch curve and the printout from the 1978 book.\n\nPeace out,\n\nComposite 1M + 100 + 80 iterations, inverse color. By author.\n\nI also have a second article about the nature of the Mandelbrot set itself.\nFor a thematic overview of articles on this blog, click here.\n\n22 Likes\n\n\u00b7\n\n2 Restacks\n\n22\n\nShare this post\n\n#### You can't handle the Buddhabrot!\n\nlcamtuf.substack.com\n\n3\n\nShare\n\n3 Comments\n\nlcamtufApr 20PinnedBonus clip: ghost rabbit - the disintegration of\nBuddhabrot: https://vimeo.com/936851633/f42a67b851Expand full\ncommentLikeReplyShare  \n---  \n  \nSriApr 12There are 112 major points. If you can spot and highlight ...Expand\nfull commentLikeReplyShare  \n---  \n  \n1 more comment...\n\nFake books\n\nMachine-generated books are here. I bought one by accident.\n\nOct 23, 2022\n\n52\n\nShare this post\n\n#### Fake books\n\nlcamtuf.substack.com\n\n14\n\nRadios, how do they work?\n\nA brief introduction to antennas, superheterodyne receivers, and signal\nmodulation schemes.\n\nMar 25\n\n59\n\nShare this post\n\n#### Radios, how do they work?\n\nlcamtuf.substack.com\n\n4\n\nTechies vs spies: the xz backdoor debate\n\nDiving into some of the dynamics and the interpretations of the brazen ploy to\nsubvert the liblzma compression library.\n\nMar 30\n\n89\n\nShare this post\n\n#### Techies vs spies: the xz backdoor debate\n\nlcamtuf.substack.com\n\n37\n\nReady for more?\n\n\u00a9 2024 lcamtuf\n\nPrivacy \u2219 Terms \u2219 Collection notice\n\nStart WritingGet the app\n\nSubstack is the home for great culture\n\nShare\n\n## Create your profile\n\n## Only paid subscribers can comment on this post\n\nAlready a paid subscriber? Sign in\n\n#### Check your email\n\nFor your security, we need to re-authenticate you.\n\nClick the link we sent to , or click here to sign in.\n\nPinned by lcamtuf\n\n", "frontpage": false}
