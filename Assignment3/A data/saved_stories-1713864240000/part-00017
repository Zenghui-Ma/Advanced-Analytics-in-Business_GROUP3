{"aid": "40127499", "title": "RPi \"poetry camera\" prints AI-generated poem of what it sees, on receipt paper", "url": "https://github.com/carolynz/poetry-camera-rpi", "domain": "github.com/carolynz", "votes": 1, "user": "bravura", "posted_at": "2024-04-23 01:29:45", "comments": 0, "source_title": "GitHub - carolynz/poetry-camera-rpi", "source_text": "GitHub - carolynz/poetry-camera-rpi\n\n## Navigation Menu\n\nSkip to content\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\ncarolynz / poetry-camera-rpi Public\n\n  * Notifications\n  * Fork 0\n  * Star 56\n\n56 stars 0 forks Branches Tags Activity\n\nStar\n\nNotifications\n\n# carolynz/poetry-camera-rpi\n\nThis commit does not belong to any branch on this repository, and may belong\nto a fork outside of the repository.\n\n4 Branches\n\n0 Tags\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\ncarolynzUpdate README.mdApr 14, 202483b4622 \u00b7 Apr 14, 2024Apr 14, 2024\n\n## History\n\n43 Commits  \n  \n### __pycache__\n\n|\n\n### __pycache__\n\n| Prints poem to receipt printer now| Jan 31, 2023  \n  \n### .gitignore\n\n|\n\n### .gitignore\n\n| ignore .env| Dec 11, 2023  \n  \n### Adafruit_Thermal.py\n\n|\n\n### Adafruit_Thermal.py\n\n| Prints poem to receipt printer now| Jan 31, 2023  \n  \n### README.md\n\n|\n\n### README.md\n\n| Update README.md| Apr 14, 2024  \n  \n### knobtest.py\n\n|\n\n### knobtest.py\n\n| reordered knob pins| Mar 4, 2023  \n  \n### main-cardboard.py\n\n|\n\n### main-cardboard.py\n\n| cardboard prototype code checkpoint| Nov 11, 2023  \n  \n### main-knob.py\n\n|\n\n### main-knob.py\n\n| reordered knob pins| Mar 4, 2023  \n  \n### main.py\n\n|\n\n### main.py\n\n| requests now handled locally| Dec 11, 2023  \n  \n### requirements.txt\n\n|\n\n### requirements.txt\n\n| adding requirements.txt| Jan 31, 2024  \n  \n### testbutton.py\n\n|\n\n### testbutton.py\n\n| single shutter button for power and LED| Nov 11, 2023  \n  \n### wraptext.py\n\n|\n\n### wraptext.py\n\n| make indent 3 spaces| Feb 6, 2023  \n  \n## Repository files navigation\n\n# Poetry Camera\n\nA camera that prints poems of what it sees.\n\nWe started this project as newcomers to the world of hobby electronics. The\nfollowing instructions are intended for complete beginners, as we were. We\nsimplified some of the design to optimize for easily sourcing and assembling\nparts; as a result, it's less compact than our photographed versions. If you\nare comfortable with electronics and coding, we encourage you to experiment\nand remix even more.\n\n\u26a0\ufe0f These instructions are still in progress. \u26a0\ufe0f Try it out and let us know\nwhat's confusing, or doesn't work.\n\n## Hardware you'll need\n\n### 1\\. Computer: Raspberry Pi Zero 2 W with headers\n\nRaspberry Pis are simplified computers. They are lightweight, cheap, have\nlimited processing power, and are more fragile than typical consumer\nelectronic devices. It's very sensitive to the specific power sources you use\n\u2014 too much power and you'll fry the part, too little power and the software\nwon't run. You also have to manually shut down the software before unplugging\nthe power, to protect the software from being corrupted.\n\nWe chose the Pi Zero 2 for its balance of processing power (Pi Zeros are too\nslow) and compact size (most other Pis on the market are larger). The wire\ndiagrams in this tutorial will apply to all Raspberry Pis, but there may be\ndifferences in software and camera compatibility, especially with older\ndevices. We've tested this with a Pi 3b+ and it works fine, but a Pi 4\nprobably requires too much power to make it a viable portable solution.\n\nRaspberry Pi Zero 2 is often sold without headers (those 2x20 black metal\nconnectors). The headers let you easily connect the Pi to the printer and\nbuttons with plug-in jumper wires. If you buy the Pi without headers, you'll\nneed to separately buy a 2x20 header and solder them on yourself. It's not\nhard, but leaves more room for error. (Of course, if you know what you're\ndoing, you can directly solder the appropriate wires to the appropriate pins\nwithout headers.)\n\nRaspberry Pis are also recovering from a supply shortage. Check rpilocator.com\nfor live stock notifications on standalone parts (does not list accessory\nkits).\n\n### 2\\. Accessories to connect the Raspberry Pi to stuff.\n\n  * Vilros sells a kit that includes all of these things\n\n    * 5V MicroUSB power supply\n    * Case\n    * 32GB MicroSD card to load the OS\n    * Heatsink to prevent overheating (very important!)\n    * MicroUSB to USB adapter, for the Logitech keyboard's wireless sensor.\n    * MiniHDMI to HDMI adapter for monitor\n  * Keyboard & mouse: we recommend this Logitech wireless combo keyboard-trackpad so it only takes up 1 port of your Pi.\n  * External monitor for viewing and programming the Pi's software. It's not strictly required, but is more beginner-friendly than SSHing into your Pi. We will assume that you are using an external monitor for all these instructions.\n\n### 3\\. Camera: Raspberry Pi Camera Module 3\n\nMostly straightforward, but be careful of damaging the hardware. The Raspberry\nPi camera is delicate and can be easily fried via static. We broke 3 cameras\nin the process of making this project. Just make sure to always store it in a\nstatic-shielding bag when you're not using it.\n\nIf you are connecting the camera to a Pi Zero 2, note that the Zero 2's camera\nconnection collar is also very delicate. We broke a Pi Zero 2 camera collar in\nthe process of making this as well and had to just get a new Pi \ud83e\udd72\n\nWe have not tested these instructions with older models of Raspberry Pi\ncameras.\n\n  * Camera accessories:\n\n    * Camera case with tripod \u2014 Helps proteect the delicate camera hardware during development.\n    * Camera cable sized specifically for Pi Zero & Zero 2 \u2014 If you are using a larger Pi, you only need default cable that comes with the camera. If you got your Zero 2 camera cable in a kit, it is likely the short ~2 inch cable. Make sure to get a long enough cable that gives you more flexibility in where you place your camera.\n    * Optional: Tweezer for opening/closing the delicate camera collar on Pi Zero 2\n\n### 4\\. Receipt printer: Mini Thermal Printer w/ TTL Serial connection\n\nWe used the Adafruit thermal printer line for this project, but they have\nsubsequently been discontinued. Similar products exist on Amazon; we are\nworking on confirming that they still work with the same printer drivers\n(which are also no longer maintained by Adafruit, but still seem to work).\n\nThe important thing is that the thermal printer has a TTL serial connection so\nyou can easily connect it to the Pi.\n\nThe Nano Thermal Printer or Thermal Printer Guts are more compact, but have\nslightly different wiring.\n\n  * Receipt printer accessories:\n\n    * 5V power supply\n    * Female DC Power Adapter to connect receipt to power supply\n    * Wire cutters, wire stripper, tiny screwdriver for wiring together\n    * Receipt paper: EcoChit thermal receipt paper, 2.25\" (phenol-free, recyclable)\n\n      * Don't use regular receipt paper! It's often filled with BPA, which is especially toxic for kids and reproductive health.\n\n### 5\\. Batteries:\n\nBatteries remain a challenge for this project because the Pi and the receipt\nprinter have very different power requirements. You could always just keep\nPoetry Camera plugged in, but that restricts the amount of interesting photos\nyou could take.\n\nWe've heard of people having success with 2x 18620 batteries. We have not\ntried this yet, but it seems promising.\n\n  * Battery for the receipt printer: 6 x AA battery holder with 5.5mm/2.1mm plug + 6x AA batteries\n\n\\- The printer needs a 5-9V power source that can handle high current draw\nwhile printing. Typical 9V alkaline batteries do *not* work as they do not\nprovide enough current. To keep things simple for assembly, we've separated\nout the power sources, but it makes things bulkier.\n\n  * Battery for the Raspberry Pi:\n\n    * The Pi needs consistent 5V of power in order to function, which standard phone battery packs do not provide, and the PiSugar battery we did find has also occasionally driven it to overheating.\n\n### 6\\. Buttons\n\n  * 2 push buttons in different colors\n  * 2 quick-connect wires to easily connect these buttons to the Pi\n\n### 7\\. Miscellaneous equipment\n\n  * Wire cutter & stripper\n  * Jumper cables\n\n## Software\n\n  * OpenAI account & API key. Each poem costs a couple cents to generate.\n\nCurrently, the main.py script running on the Pi:\n\n  * Takes a photo when you click the shutter button\n  * Sends the photo to GPT-4 to create a poem\n  * Receives an AI-generated poem from OpenAI\n  * Prints poem out on thermal receipt printer\n\nThe Adafruit_Thermal.py script is Adafruit's thermal printer Python library.\n\n## How to set up\n\nThis was cobbled together from the following tutorials:\n\n  * Instant Camera using Raspberry Pi and Thermal Printer\n  * Networked Thermal Printer using Raspberry Pi and CUPS\n\n  1. Set up your Raspberry Pi with Camera connection.\n\n  2. Open up the Terminal on your Pi.\n\n  3. Set up Raspberry Pi hardware to take Camera & Serial inputs:\n\n    \n    \n    sudo raspi-config\n\n  4. You'll want to adjust the following settings:\n\n     * Glamor: ON (for Camera setup on newer versions of Raspbian OS)\n     * Serial Port ON (lets you access receipt printer inputs)\n     * Serial Console OFF (idk what this does)\n\nRestart the system as needed.\n\n  5. Update the system and install requirements. I'm not sure you even need all of these; I can go over these again later and trim out the unnecessary ones.\n\n    \n    \n    $ sudo apt-get update $ sudo apt-get install git cups build-essential libcups2-dev libcupsimage2-dev python3-serial python-pil python-unidecode\n\n  6. Install some software required to make the Adafruit Thermal Printer work.\n\n    \n    \n    $ cd $ git clone https://github.com/adafruit/zj-58 $ cd zj-58 $ make $ sudo ./install\n\n  7. Clone this repo, which contains our Poetry Camera software:\n\n    \n    \n    $ cd $ git clone https://github.com/carolynz/poetry-camera-rpi.git\n\n  8. Set up your thermal printer, connecting it to power and your Pi. See diagram and instructions in this tutorial. Test that it works. Pay attention to your printer's baud rate (e.g. 19200). We will use this later on.\n\n  9. Open our poetry-camera-rpi directory:\n\n    \n    \n    $ cd poetry-camera-rpi\n\n  10. If your printer's baud rate is different from 19200, open main.py and replace that number with your own printer's baud rate:\n\n    \n    \n    # main.py: # instantiate printer printer = Adafruit_Thermal('/dev/serial0', 19200, timeout=5)\n\n  11. Run the poetry camera script.\n\n    \n    \n    $ python main.py\n\n## TODO instructions for adding buttons\n\n## TODO instructions for auto-start/shutoff\n\n  * Set up a cron job to run your python script at startup. First, open your crontab file to your default editor:\n\n    \n    \n    $ crontab -e\n\n  * Then add the following line to your crontab, to run the script when you boot up the computer.\n\n    \n    \n    # Run poetry camera script at start @reboot python /home/pi/poetry-camera-rpi/main.py >> /home/pi/poetry-camera-rpi/errors.txt 2>&1\n\nThe >> {...}errors.txt 2>&1 writes any error messages to errors.txt for\ndebugging. A common failure mode is files cannot be found. Make sure that all\nyour filepaths are absolute filepaths and have the right usernames and\ndirectory names.\n\n  * Reboot the system for this to take effect\n\n    \n    \n    sudo reboot\n\n  * Try clicking your shutter and power buttons to make sure they're working upon reboot. If they're not working, check your errors.txt file.\n\nLots of errors in these instructions, I'm sure.\n\n## About\n\nNo description, website, or topics provided.\n\n### Resources\n\nReadme\n\nActivity\n\n### Stars\n\n56 stars\n\n### Watchers\n\n4 watching\n\n### Forks\n\n0 forks\n\nReport repository\n\n## Releases\n\nNo releases published\n\n## Packages 0\n\nNo packages published\n\n## Languages\n\n  * Python 100.0%\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": false}
